{"version":3,"sources":["scripts/main.js"],"names":["defaultText","table","document","querySelector","tableHeader","rows","tableRows","tBodies","rowsCollection","objClicked","form","createElement","selectCity","submitBtn","block","blockTitle","textP","addInput","unitAge","unitSalary","tableSort","index","asc","arr","Array","from","querySelectorAll","sort","a","b","aValue","children","innerText","bValue","includes","slice","replace","localeCompare","forEach","elem","appendChild","text","type","label","input","content","charAt","toUpperCase","pattern","setAttribute","name","textContent","append","note","message","className","classList","add","addToTable","employee","empName","position","office","age","salary","validSalary","Number","toLocaleString","insertAdjacentHTML","validateTextData","dataText","textData","trim","textArray","split","item","push","map","word","join","createInput","startValue","value","min","after","addEventListener","e","td","target","closest","contains","addNewData","action","length","remove","keypress","key","element","toggle","cellIndex","undefined","send","preventDefault","data","FormData","dataObject","Object","fromEntries","entries","checkName","checkPosition","checkAge","successNote","reset","setTimeout"],"mappings":"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","file":"main.adf8ce3d.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst table = document.querySelector('table');\nconst tableHeader = table.rows[0];\nconst tableRows = table.tBodies[0];\nconst rowsCollection = tableRows.rows;\nconst objClicked = {};\nconst form = document.createElement('form');\nconst selectCity = [\n  'Tokyo', 'Singapore',\n  'London', 'New&#32;York',\n  'Edinburgh', 'San&#32;Francisco',\n];\nconst submitBtn = document.createElement('button');\nconst block = document.createElement('div');\nconst blockTitle = document.createElement('h3');\nconst textP = document.createElement('p');\nlet defaultText;\n\naddInput('name');\naddInput('position');\n\nconst unitAge = addInput('age', 'number');\nconst unitSalary = addInput('salary', 'number');\n\nunitAge.min = 0;\nunitSalary.min = 0;\n\nform.children[2].insertAdjacentHTML('beforebegin', `\n  <label> Office\n    <select name=\"office\" data-qa=\"office\" required>\n      ${selectCity.map(text => `\n      <option value=${text}>${text}</option>\n      `)};\n    </select>\n  </label>\n`);\n\nsubmitBtn.type = 'submit';\nsubmitBtn.textContent = 'Save to table';\nform.append(submitBtn);\n\nform.className = 'new-employee-form';\ntable.after(form);\n\ntableRows.addEventListener('dblclick', e => {\n  const td = e.target.closest('td');\n\n  if (!td || !tableRows.contains(td)) {\n    return null;\n  }\n\n  defaultText = td.textContent;\n\n  const input = createInput();\n\n  td.textContent = '';\n  td.append(input);\n\n  input.addEventListener('blur', addNewData);\n\n  input.addEventListener('keypress', (keypress) => {\n    if (keypress.key === 'Enter') {\n      addNewData(keypress);\n    }\n  });\n\n  function addNewData(action) {\n    let value = action.target.value;\n\n    if (!(value.trim().length > 0)) {\n      value = defaultText;\n    }\n    td.textContent = value;\n    input.remove();\n  }\n});\n\ntableRows.addEventListener('click', e => {\n  const item = e.target.closest('tr');\n\n  if (!item || !tableRows.contains(item)) {\n    return null;\n  }\n\n  [...rowsCollection].forEach(element => {\n    if (element.classList.contains('active')) {\n      element.classList.toggle('active');\n    }\n  });\n  item.classList.add('active');\n});\n\ntableHeader.addEventListener('click', e => {\n  const item = e.target.closest('th');\n\n  if (!item || !tableHeader.contains(item)) {\n    return null;\n  }\n\n  const index = e.target.cellIndex;\n\n  if (objClicked[index] === undefined || objClicked[index] === false) {\n    tableSort(index);\n    objClicked[index] = true;\n  } else {\n    tableSort(index, false);\n    objClicked[index] = false;\n  }\n});\n\nfunction tableSort(index, asc = true) {\n  const arr = Array.from(table.querySelectorAll('tbody tr'));\n\n  arr.sort((a, b) => {\n    let aValue = a.children[index].innerText;\n    let bValue = b.children[index].innerText;\n\n    if (aValue.includes('$')) {\n      aValue = aValue.slice(1).replace(',', '');\n      bValue = bValue.slice(1).replace(',', '');\n\n      return (asc) ? aValue - bValue : bValue - aValue;\n    }\n\n    return (asc) ? aValue.localeCompare(bValue) : bValue.localeCompare(aValue);\n  });\n\n  arr.forEach(elem => {\n    table.querySelector('tbody').appendChild(elem);\n  });\n}\n\nfunction addInput(text, type = 'text') {\n  const label = document.createElement('label');\n  const input = document.createElement('input');\n  const content = `${text.charAt(0).toUpperCase()}${text.slice(1)}`;\n\n  if (type === 'text') {\n    input.pattern = '[A-Za-z -]+';\n\n    const validNote = 'this.setCustomValidity(\"Use words, \\' \\', and - \")';\n\n    input.setAttribute('onchange', 'this.setCustomValidity(\"\")');\n    input.setAttribute('oninvalid', validNote);\n  }\n\n  input.name = text;\n  input.type = type;\n  input.setAttribute('data-qa', text);\n  label.textContent = content;\n  label.append(input);\n  form.append(label);\n\n  return input;\n}\n\nfunction note(message, type = 'error') {\n  blockTitle.className = 'title';\n  blockTitle.textContent = type;\n  block.className = 'notification';\n  block.setAttribute('data-qa', 'notification');\n  block.classList.add(type);\n  textP.textContent = message;\n  block.append(blockTitle);\n  block.append(textP);\n\n  return block;\n};\n\nform.addEventListener('submit', (send) => {\n  send.preventDefault();\n\n  const data = new FormData(form);\n  const dataObject = Object.fromEntries(data.entries());\n  const checkName = validateTextData(dataObject.name).length < 4;\n  const checkPosition = validateTextData(dataObject.position).length < 4;\n  const checkAge = +dataObject.age < 18 || +dataObject.age > 90;\n  const textMessage = `\n    Text must contain > 3 symbols\n    only words, spaces and '-'\n    without digits\n  `;\n  const ageMessage = `Age must be at 18 to 90`;\n  const added = 'employee added to the table';\n\n  if (checkName || checkPosition) {\n    form.after(note(textMessage));\n  } else if (checkAge) {\n    form.after(note(ageMessage));\n  } else {\n    addToTable(dataObject);\n\n    const successNote = note(added, 'success');\n\n    form.after(successNote);\n    document.querySelector('.new-employee-form').reset();\n    setTimeout(() => successNote.remove(), 2000);\n  }\n});\n\nfunction addToTable(employee) {\n  const { name: empName, position, office, age, salary } = employee;\n\n  const validSalary = `$${Number(salary).toLocaleString('en-EN')}`;\n\n  tableRows.insertAdjacentHTML('beforeend', `\n    <tr>\n        <td>\n          ${validateTextData(empName)}\n        </td>\n        <td>\n          ${validateTextData(position)}\n        </td>\n        <td>\n          ${office}\n        </td>\n        <td>\n          ${age}\n        </td>\n        <td>\n          ${validSalary}\n        </td>\n    </tr>\n  `);\n}\n\nfunction validateTextData(dataText) {\n  const textData = dataText.trim();\n  const arr = [];\n\n  textData.split(' ').forEach(item => {\n    if (item !== '') {\n      arr.push(item);\n    }\n  });\n\n  const textArray = arr.map(word => {\n    return (word[0].toUpperCase() + word.slice(1));\n  });\n\n  return textArray.join(' ');\n}\n\nfunction createInput(startValue = '') {\n  const input = document.createElement('input');\n\n  input.className = 'cell-input';\n  input.type = 'text';\n  input.value = startValue;\n\n  return input;\n};\n"]}